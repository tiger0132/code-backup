# std::tr1::bio

（因为 $n,m$ 同阶，所以为了方便，所有的 $m$ 均改成了 $n$）

## Subtask 1

暴力枚举。

时间复杂度 $O(n^2)$，空间复杂度 $O(n)$。

## Subtask 1,2

二分。

令 $p_i=\min_{a_j>b_i}\{j\}$，即满足 $a_j>b_i$ 的最小的 $j$，那么显然我们要求的答案就是 $\sum_{i=1}^mp_i$。

然后对于每个 $i$ 暴力二分出 $p_i$。

时间复杂度 $O(n\log n)$，空间复杂度 $O(n)$。

但是好像可以随便艹过 Subtask 3……

## Subtask 1,2,3（解法 1）

这个题目是 two-pointers 的典型应用。

令 $p_i=\min_{a_j>b_i}\{j\}$，即满足 $a_j>b_i$ 的最小的 $j$，那么显然我们要求的答案就是 $\sum_{i=1}^mp_i$。

注意到对于所有的 $i,j$，如果 $i\le j$，那么有 $p_i\le p_j$。

所以我们可以在递增 $i$ 的同时，用另一个指针维护 $p_i$。因为上面的性质，所以我们在计算 $p_i$ 的时候不需要从头开始，只需要从 $p_{i-1}$ 开始依次判断。

时间复杂度 $O(n)$，空间复杂度 $O(n)$。

[root 的提交记录](http://flamire.akioi.ml/submission/122)

## Subtask 1,2,3（解法 2）

因为值域较小，$O(\text{值域})$ 的时空复杂度可以接受，所以可以使用另一种方法。

令 $c_i=\sum_{j=1}^n[a_j>i]$，那么显然我们要求的答案是 $\sum_{j=1}^mc_{b_j}$。这个可以使用后缀和求出。

时间复杂度 $O(\text{值域})$，空间复杂度 $O(n+\text{值域})$。

[Mital 的提交记录](http://flamire.akioi.ml/submission/188)

# std::tr1::sum

（因为 $n,m$ 同阶，所以为了方便，所有的 $m$ 均改成了 $n$）

## Subtask 2

先假设 $n=m$。

考虑一个这样的构造方式：$a=[0,1,2,\ldots,n-1],b=[0,n,2n,\ldots,n(n-1)]$。显然这个构造方式可以取出 $n^2$ 中不同的和，$a$ 可以理解为余数，$b$ 可以理解为商。可以证明这个构造方式的最大值是最小的，所以如果 $k<n(n-1)$，那么无解。

考虑 $n\ne m$ 的情况。此时我们需要在 $a$ 为商、$b$ 为余数和 $a$ 为余数、$b$ 为商中间选一个。

如果 $n(m-1)<m(n-1)$，那么可以让 $a$ 为余数、$b$ 为商，否则则反过来。

同理，如果 $k<\min(n(m-1),m(n-1))$，那么无解。

时间复杂度 $O(n)$，空间复杂度 $O(n)$。

## Subtask 1,2,3,4

同理，我们希望这两个数组可以产生 $0\sim k-1$ 的所有数。这样可以使最大值最小。

假设我们让 $a$ 为余数，$b$ 为商。

对于 $n\le k<n(m-1)$ 的情况，我们只需要构造 $b=[0,\min(n,k-n),\min(2n,k-n),\ldots,\min(n(m-1),k-n)]$ 即可。

对于 $1\le k<n$ 的情况，我们只需要构造 $a=[0,1,2,\ldots,k-1,k-1,\ldots,k-1]$ 即可。（std 写的是 $[0,1,2,\ldots,k-1,0,\ldots,0]$）

对于上述两种情况，最优地选取商和余数的方法有所不同。建议按照两种方法各做一遍，以避免复杂的分类讨论。

时间复杂度 $O(n)$，空间复杂度 $O(n)$。

[root 的提交记录](http://flamire.akioi.ml/submission/148)

# std::tr1::lca

显然这也是一道送分题，看起来因为细节的原因，比 sum 过的人还多（事实上除了验题人，场上只有一个人过了 sum）

## Subtask 1

做法和正解相同。

## Subtask 2

随便对两个点取 LCA，然后 `submit`。（直接交 Subtask 0 的代码就可以得分）

操作次数为 $1$。

## Subtask 1,2,3,4

开一个集合 $S=\{1,2,\ldots,n\}$。

每次从集合中随便选两个点，把它们删掉，然后再把 LCA 加入这个点集。这样做 $n-1$ 次之后一定可以得到根。

反证。因为根与任何点的 LCA 都是根，所以如果最后得到的点不是根，那么存在根和某个点的 LCA 不等于根。与 LCA 的性质矛盾。

操作次数为 $n-1$。

[root 的提交记录](http://flamire.akioi.ml/submission/175)

# std::tr1::seq

（因为 $n,m$ 同阶，所以为了方便，所有的 $m$ 均改成了 $n$）

不想写各个 Subtask 的解法了，应该都不是很复杂吧……

## Subtask 1,2,3,4,5,6

令 $b_i=a_i+i$，那么两个询问可以转化成这样：

1. $\forall i\in[l,r],b_i\leftarrow\min\{b_i,2i-l+1\}$。

2. 求 $\min_{i=l}^r\{b_i-l+1\}$。

注意到询问 2 等价于求 $\min_{i=l}^r\{b_i\}$，那么我们只需要维护区间对等差数列取 $\min$，区间最小值。可以考虑线段树。

时间复杂度 $O(n\log n)$，空间复杂度 $O(n)$。

[root 的提交记录](http://flamire.akioi.ml/submission/298)

# std::tr1::multiple

## Subtask 1,2,3,4（解法 1）

tag：同余最短路

考虑从高到低依次填数，要求 $n$ 的倍数就等价于要求 $\bmod n=0$ 的数。

对于某个数 $x$，在它的后面加一位数 $y$，得到的余数是 $(10x+y)\bmod n$。也就是说我们从 $x$ 转移到了 $(10x+y)\bmod n$。

所以每一个符合条件的数，都可以通过 **从 $S$ 的补集中某个非 $0$ 的数开始，经过若干次转移，到达了 $0$ 号点** 的方式构造出来。

我们希望这个数字最小。也就是要求 **最短路**。上面的转移就是图的构造方式。具体如下：

- 对于所有的 $i\not\in S,i\ne 0$，连接 $S\to i$；
- 对于所有的 $i\not\in S,x\in(0,n)$，连接 $x\to(10x+i)\bmod n$。

那么这张图上 $S\to0$ 的最短路中字典序最小的，即为答案。

因为所有的边权为相同，所以可以使用 BFS。实现细节详见代码。

时间复杂度 $O(n)$，空间复杂度 $O(n)$（反正基数 $10$ 是常数 2333）

[root 的提交记录](http://flamire.akioi.ml/submission/186)

## Subtask 1,2,3,4（解法 2）

乱搞。

$|S|=9$ 的做法是平凡的。

对于 $|S|<9$ 的情况，我们可以二分，然后数位 DP check。

看起来并不好卡？出题人并没有构造出一组答案位数超过 $34$ 位的数据。如果构造出了更优的数据请在评论区告知 >_<

~~反正没有同余最短路好写就对了~~

## 数据相关

找到了几组还不错的解……但是离卡掉乱搞还有很远……

反正我觉得乱搞卡不掉 23333

```
999999 0 1（注意这里的 0 1 代表 S 的补集）
111111111111111111111111111111111111111111111111111111
999999 0 2
222222222222222222222222222222222222222222222222222222
999999 0 4
444444444444444444444444444444444444444444444444444444
999999 0 5
555555555555555555555555555555555555555555555555555555
999999 0 7
7070007070007770007770707770707770777777777
999999 0 8
888888888888888888888888888888888888888888888888888888
999990 0 1
1111111111111111111111111111111111111111111110
999990 0 2
2222222222222222222222222222222222222222222220
999990 0 4
4444444444444444444444444444444444444444444440
999990 0 5
5555555555555555555555555555555555555555555550
999990 0 7
7777777777777777777777777777777777777777777770
999990 0 8
8888888888888888888888888888888888888888888880
```